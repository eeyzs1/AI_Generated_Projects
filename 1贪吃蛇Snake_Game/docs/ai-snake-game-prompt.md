# AI驱动的诗意贪吃蛇游戏 - 完整开发提示词

## 🎯 项目概述

创建一个融合经典贪吃蛇游戏与现代AI技术的创新网页游戏。玩家控制贪吃蛇收集富有诗意的单词，当收集到一定数量的单词后，AI会自动创作诗歌，并根据诗歌内容生成艺术图像。这将是一个融合游戏性、诗意和视觉艺术的多维体验。

## 🎨 设计理念

**核心理念：** "游戏即艺术创作"
- 将游戏过程转化为诗歌创作的过程
- 每次游戏都是独一无二的创作体验
- 让玩家在娱乐中感受AI艺术的魅力
- 创建沉浸式的诗意氛围

**设计目标：**
- 现代化的UI设计，具有艺术感和诗意
- 流畅的动画和过渡效果
- 直观的游戏交互
- 惊喜不断的AI创作展示

## 🛠️ 技术栈（严格遵循）

**前端技术（不可更改）：**
- Next.js 16 with App Router
- TypeScript 5
- Tailwind CSS 4
- shadcn/ui 组件库（New York 风格）
- Lucide React 图标库
- Framer Motion 动画库
- next-themes 主题切换

**后端技术：**
- Next.js API Routes
- z-ai-web-dev-sdk（必须用于AI功能，仅限后端使用）
- Prisma ORM（如果需要持久化）

**不使用的库：**
- 禁止使用 indigo 或蓝色系颜色（除非特别指定）
- 禁止使用外部CDN链接
- 禁止使用非指定技术栈的库

## 🎮 游戏核心机制

### 1. 基础贪吃蛇玩法

**游戏规则：**
- 经典贪吃蛇移动逻辑：蛇头向当前方向移动，蛇身跟随
- 使用方向键（↑↓←→）或WASD控制蛇的方向
- 蛇不能直接反向移动（例如：向右时不能直接向左）
- 蛇撞到墙壁或自己的身体会导致游戏结束
- 吃到食物后蛇身增长，速度可以逐渐提升
- 每次吃到单词食物时获得10分

**难度递进：**
- 初始速度：200ms/格
- 每吃到5个食物，速度增加10%
- 最高速度限制：80ms/格
- 速度变化时显示视觉提示

### 2. 创意食物系统 - 诗意单词

**单词库设计：**
```typescript
// 主题分类的单词库
const WORD_CATEGORIES = {
  自然: ['星空', '月光', '晨曦', '晚霞', '春风', '秋雨', '山川', '河流', '大海', '森林'],
  情感: ['思念', '温暖', '希望', '梦想', '勇气', '温柔', '孤独', '自由', '友谊', '爱情'],
  时间: ['岁月', '时光', '瞬间', '永恒', '昨天', '明天', '黎明', '黄昏', '往事', '未来'],
  抽象: ['理想', '信念', '智慧', '灵感', '奇迹', '宿命', '缘分', '回忆', '幻想', '憧憬']
}

// 稀有度系统
const RARITY = {
  COMMON: { color: '#10b981', size: 1, points: 10 },
  RARE: { color: '#8b5cf6', size: 1.2, points: 20 },
  EPIC: { color: '#f59e0b', size: 1.4, points: 30 },
  LEGENDARY: { color: '#ef4444', size: 1.6, points: 50 }
}
```

**食物特性：**
- 每个食物显示一个中文单词（2-3个字）
- 单词以圆形图标的形式显示在游戏画布上
- 不同稀有度的食物有不同的颜色和大小
- 传说级单词食物有发光动画效果
- 单词文字清晰可见，使用圆润的字体

**食物生成逻辑：**
- 确保食物不会生成在蛇身上
- 确保食物不会生成在墙壁上
- 普通食物70%，稀有食物25%，史诗食物4%，传说食物1%
- 同一单词不能连续出现3次

### 3. 单词收集盒系统

**收集盒UI设计：**
- 位置：游戏区域右侧的卡片区域
- 显示所有已收集的单词
- 每个单词显示为徽章样式
- 徽章包含：序号、单词内容、稀有度标识
- 徽章颜色与单词稀有度对应
- 支持滚动查看（最多显示8个单词触发AI生成）

**收集进度追踪：**
- 顶部显示进度条：已收集/目标数量
- 目标数量：8个单词（可配置）
- 进度条动画效果：收集单词时有渐变动画
- 达到目标时显示庆祝动画（五彩纸屑效果）

### 4. AI诗歌创作系统

**触发时机：**
- 收集到8个单词后自动触发
- 游戏自动暂停
- 显示"AI正在创作诗歌..."加载状态
- 创作完成后展示诗歌

**诗歌生成要求（使用LLM技能）：**

**System Prompt模板：**
```
你是一位杰出的现代诗人，擅长将零散的词语编织成优美的诗歌。

你的创作风格：
- 语言优美而凝练
- 意象丰富，画面感强
- 情感真挚，富有感染力
- 结构完整，韵律和谐
- 富有哲理和深度

创作要求：
1. 必须自然地融入所有给定的词语
2. 诗歌应该像一段完整的叙述或抒情
3. 每行字数适中（6-12字）
4. 整体长度8-14行
5. 语言要富有诗意，避免大白话
6. 可以选择自由诗或有韵律的诗体
7. 情感基调要与词语的整体氛围匹配
8. 创作时要大胆想象，不要拘泥于传统
9. 直接输出诗歌内容，不要包含任何标题、说明或额外文字
```

**User Prompt模板：**
```
请使用以下词语创作一首现代诗歌：

词语列表：[依次列出所有收集的单词]

请开始创作：
```

**诗歌展示UI：**
- 使用优雅的卡片容器
- 渐变背景：紫色到粉色渐变
- 诗歌居中显示，使用优雅的字体
- 每行诗歌之间有适当的间距
- 整体呈现竖排版（传统诗歌风格）或横排版（现代诗歌风格）
- 添加微妙的背景装饰元素（如：云雾、星光）

### 5. 诗歌重新混合功能

**功能描述：**
- 提供"重新混合"按钮
- 点击后使用相同的单词集合创作新的诗歌
- 每次混合使用不同的创作风格提示

**混合风格选项：**
```
风格1：深情而哲思
风格2：轻快而浪漫
风格3：宏大而壮阔
风格4：细腻而温婉
风格5：梦幻而抽象
风格6：简洁而有力
```

**System Prompt（重新混合）：**
```
你是一位多才多艺的诗人，能够用不同的风格重新诠释同一组词语。

当前混合风格：{随机选择一种风格}

请用这种风格重新创作诗歌，确保：
1. 风格明显不同
2. 情感基调符合所选风格
3. 语言表达方式和角度有所创新
4. 依然融入所有给定的词语
5. 保持诗歌的美感和质量
```

### 6. AI图像生成系统

**触发时机：**
- 诗歌生成完成后自动触发
- 显示"AI正在创作艺术图像..."加载状态
- 图像生成完成后展示

**图像生成要求（使用Image Generation技能）：**

**Prompt构建策略：**
```
基础描述：
一幅富有诗意的艺术插画，{诗歌的核心主题和意境}

风格描述：
水彩画风格，柔和的笔触，梦幻的光影，东方美学元素

视觉元素：
- {从诗歌中提取1-2个关键意象}
- 温暖而柔和的色调
- 诗意化的构图
- 空灵的氛围
- 精美的细节

技术要求：
高清画质，专业插画风格，艺术画廊水准

完整Prompt（示例）：
一幅富有诗意的艺术插画，描绘月光洒落在静谧的湖面上。
水彩画风格，柔和的笔触，梦幻的光影，东方美学元素。
视觉元素：
- 银色的月光透过薄雾
- 波光粼粼的湖面
- 远处的山峦剪影
- 空灵的月光倒影
- 温暖而柔和的蓝紫色调
- 诗意化的构图，留白艺术
- 空灵的氛围
- 精美的细节
高清画质，专业插画风格，艺术画廊水准
```

**Prompt智能构建：**
- 分析诗歌情感基调（忧伤/欢快/宁静/激昂）
- 提取关键意象（月亮/花朵/星空/海洋）
- 根据情感选择色调（蓝色系/金色系/粉色系）
- 添加风格修饰词（梦幻/写实/抽象）

**图像展示UI：**
- 使用精美的卡片容器
- 渐变背景：蓝色到青色渐变
- 图像居中显示，添加阴影效果
- 图像下方显示"基于诗歌《{诗歌前四个字}...》创作"
- 支持点击放大查看
- 提供"重新生成图像"按钮

## 🖥️ UI/UX设计规范

### 1. 整体布局

**桌面端布局（>1024px）：**
```
+--------------------------------------------------+
|                  页面头部                        |
+------------------+-------------------------------+
|                  |                               |
|   游戏主区域     |     侧边栏                     |
|   (画布+控制)    |   - 收集进度                   |
|   60% 宽度       |   - 单词收集盒                 |
|                  |   - 得分统计                   |
+------------------+   - 游戏说明                   |
|  创作展示区域    |   - 历史记录                   |
|  (诗歌+图像)     |                               |
|  60% 宽度        |                               |
+------------------+-------------------------------+
|                  页面底部                         |
+--------------------------------------------------+
```

**移动端布局（<768px）：**
- 垂直堆叠布局
- 游戏画布自动适配屏幕宽度
- 侧边栏内容移动到游戏下方
- 创作展示区域在最后

### 2. 配色方案（禁止蓝色/indigo）

**主色调：**
- Primary: 深绿色 #166534（森林绿）
- Secondary: 橙色 #f97316（温暖的橙）
- Accent: 紫色 #8b5cf6（优雅的紫）
- Background: 浅绿色/米白渐变

**语义色：**
- Success: 绿色 #22c55e
- Warning: 橙色 #f97316
- Error: 红色 #ef4444
- Info: 青色 #06b6d4

**渐变方案：**
- 页面背景：从绿色到浅黄色的柔和渐变
- 诗歌卡片：从紫色到粉色的梦幻渐变
- 图像卡片：从青色到蓝色的清新渐变
- 按钮悬停：添加微妙的渐变效果

### 3. 字体设计

**标题字体：**
- 粗体，大字号
- 使用系统默认无衬线字体
- 添加字间距提升可读性

**正文字体：**
- 中等粗细
- 行高1.6提升阅读体验
- 颜色使用深灰色而非纯黑

**诗歌专用字体：**
- 可以使用衬线字体增强诗意感
- 或者使用毛笔字体风格（如果可用）
- 增加字间距和行间距

### 4. 动画效果

**使用Framer Motion实现：**

**页面加载动画：**
- 整体淡入效果（duration: 0.8s）
- 元素依次出现（stagger: 0.1s）

**游戏元素动画：**
- 食物出现：缩放+淡入（scale: 0 to 1, opacity: 0 to 1）
- 蛇移动：流畅的过渡效果（不是跳跃）
- 单词收集：飞向收集盒的动画

**交互反馈动画：**
- 按钮悬停：轻微放大+颜色变化
- 进度条：平滑的增长动画
- 徽章添加：从右侧滑入

**AI生成展示动画：**
- 诗歌出现：打字机效果或逐行淡入
- 图像出现：缩放+淡入，伴随模糊到清晰
- 加载状态：旋转动画或脉冲效果

### 5. 响应式设计

**断点设置：**
- Mobile: < 640px
- Tablet: 640px - 1024px
- Desktop: > 1024px

**适配策略：**
- 画布大小根据屏幕宽度动态调整
- 使用CSS Grid/Flexbox实现弹性布局
- 移动端优化触摸控制（可选添加虚拟方向键）
- 字体大小使用相对单位（rem/em）

## 🚀 功能模块详细设计

### 模块1：游戏画布组件

**组件结构：**
```tsx
<GameCanvas
  gridSize={20}
  cellSize={25}
  snake={snake}
  food={food}
  collectedWords={collectedWords}
  score={score}
  level={level}
  speed={speed}
/>
```

**实现要点：**
- 使用 HTML5 Canvas 绘制
- 支持高DPI屏幕（Retina适配）
- 使用 requestAnimationFrame 优化性能
- 实现网格背景（可选可切换）
- 蛇身使用圆角矩形，更加美观
- 食物使用圆形+文字组合

**视觉效果：**
- 蛇头：深绿色，添加眼睛细节
- 蛇身：渐变绿色，头部深尾部浅
- 食物：根据稀有度显示不同颜色
- 碰撞效果：粒子爆炸动画
- 死亡效果：蛇身碎裂动画

### 模块2：单词收集盒组件

**组件结构：**
```tsx
<WordCollectionBox
  words={collectedWords}
  target={8}
  progress={collectedWords.length / 8}
  onWordClick={(word) => { /* 显示单词详情 */ }}
/>
```

**功能特性：**
- 顶部进度条（带动画）
- 单词徽章列表（支持滚动）
- 每个徽章显示：序号、单词、稀有度标识
- 徽章悬停显示详细信息
- 新增单词高亮动画
- 达到目标时的庆祝效果

**徽章设计：**
```
┌─────────────────┐
│ 1. 星光  ★★★  │  ← 传说级（红色+3星）
├─────────────────┤
│ 2. 春风   ★★  │  ← 史诗级（橙色+2星）
├─────────────────┤
│ 3. 岁月    ★  │  ← 稀有级（紫色+1星）
├─────────────────┤
│ 4. 希望       │  ← 普通（绿色）
└─────────────────┘
```

### 模块3：诗歌展示组件

**组件结构：**
```tsx
<PoemDisplay
  poem={poem}
  words={collectedWords}
  isGenerating={isGeneratingPoem}
  onRemix={handleRemix}
  onCopy={handleCopy}
/>
```

**UI设计：**
- 容器：圆角卡片，渐变背景
- 标题："AI创作的诗歌"或自定义标题
- 诗歌内容：竖排或横排，优雅的字体
- 操作按钮：重新混合、复制、收藏
- 加载状态：旋转的诗意图标或打字机动画

**加载动画设计：**
- 显示："AI正在挥毫泼墨..."
- 配合水滴落下的动画
- 或者羽毛笔书写的动画

### 模块4：图像展示组件

**组件结构：**
```tsx
<ImageDisplay
  image={generatedImage}
  poem={poem}
  isGenerating={isGeneratingImage}
  onRegenerate={handleRegenerateImage}
  onDownload={handleDownload}
/>
```

**UI设计：**
- 容器：圆角卡片，渐变背景
- 图像区域：圆角，阴影
- 下方文字："基于诗歌《{摘要}》创作"
- 操作按钮：重新生成、下载、分享
- 加载状态：画笔挥舞的动画

**图像特性：**
- 支持点击放大查看（Lightbox效果）
- 高清质量，适配视网膜屏幕
- 添加版权水印（可选）

### 模块5：游戏控制组件

**组件结构：**
```tsx
<GameControls
  isPlaying={isPlaying}
  isGameOver={isGameOver}
  isPaused={isPaused}
  score={score}
  level={level}
  onStart={handleStart}
  onPause={handlePause}
  onResume={handleResume}
  onRestart={handleRestart}
/>
```

**按钮设计：**
- 开始游戏：绿色主按钮，带Play图标
- 暂停/继续：黄色按钮，带Pause/Play图标
- 重新开始：橙色按钮，带Refresh图标
- 返回主页：灰色按钮，带Home图标

**游戏信息显示：**
- 当前分数：大字号，金色
- 当前等级：中等字号，蓝色
- 最高分：小字号，灰色
- 游戏时间：计时器格式

## 🎬 创意元素与惊喜

### 1. 特殊事件系统

**随机触发的事件：**
- **诗意时刻**：每收集5个单词，屏幕上方飘过一句诗
- **星光闪烁**：传说级单词收集时，整个屏幕闪烁星光
- **季节变换**：根据季节不同，背景色微妙变化
- **成就解锁**：达到特定成就时弹出成就通知

**成就系统：**
```
成就1：初学者 - 完成首次游戏
成就2：收藏家 - 收集10个不同单词
成就3：诗韵达人 - 生成10首诗歌
成就4：鉴赏家 - 收集50个单词
成就5：全能艺术家 - 生成25幅图像
```

### 2. 视觉特效

**粒子效果：**
- 收集单词时爆发彩色粒子
- 游戏结束时蛇身碎裂为粒子
- 达到目标时庆祝五彩纸屑

**光影效果：**
- 传说级食物周围有光环
- 蛇头有微弱的光晕
- 诗歌展示区域有星光点缀

**过渡动画：**
- 游戏结束到诗歌展示的平滑过渡
- 诗歌到图像的淡入淡出
- 重新混合诗歌的转场效果

### 3. 音效设计（可选，后续可添加）

**背景音乐：**
- 轻柔的钢琴曲或古琴曲
- 根据游戏进度淡入淡出

**音效：**
- 收集单词：清脆的风铃声
- 游戏结束：温和的提示音
- 诗歌生成完成：悠扬的钟声
- 图像生成完成：梦幻的音效

## 📱 移动端优化

### 触摸控制
- 添加虚拟方向键（仅在移动端显示）
- 支持滑动控制手势
- 防止触摸滚动干扰游戏

### 性能优化
- 降低粒子效果数量
- 简化动画复杂度
- 优化Canvas渲染性能

### 交互优化
- 按钮增大，便于点击
- 调整字体大小
- 优化信息密度

## 🔧 技术实现细节

### 1. 游戏循环实现

```typescript
// 使用 requestAnimationFrame 实现流畅动画
const gameLoop = useCallback(() => {
  if (!isPlaying || isPaused || isGameOver) return

  const now = performance.now()
  const delta = now - lastFrameTime

  if (delta >= currentSpeed) {
    // 更新游戏状态
    updateGameState()

    lastFrameTime = now
  }

  // 渲染
  renderGame()

  // 下一帧
  gameLoopRef.current = requestAnimationFrame(gameLoop)
}, [isPlaying, isPaused, isGameOver, currentSpeed])
```

### 2. 状态管理

```typescript
// 使用 React State + useCallback 优化性能
interface GameState {
  snake: Position[]
  food: WordFood | null
  direction: Direction
  nextDirection: Direction
  score: number
  level: number
  collectedWords: string[]
  isPlaying: boolean
  isPaused: boolean
  isGameOver: boolean
  poem: string | null
  generatedImage: string | null
}
```

### 3. API集成

**诗歌生成API：**
```typescript
// POST /api/generate-poem
{
  words: string[]  // 收集的单词列表
}

// Response
{
  success: true,
  poem: string  // 生成的诗歌
}
```

**重新混合API：**
```typescript
// POST /api/remix-poem
{
  words: string[],      // 原单词列表
  previousPoem: string, // 之前的诗歌
  style: string         // 可选：指定风格
}

// Response
{
  success: true,
  poem: string,  // 新的诗歌
  style: string  // 使用的风格
}
```

**图像生成API：**
```typescript
// POST /api/generate-image
{
  poem: string,  // 诗歌内容
  style?: string  // 可选：艺术风格
}

// Response
{
  success: true,
  image: string  // base64编码的图像数据
}
```

### 4. 性能优化策略

**Canvas优化：**
- 使用离屏Canvas预渲染静态元素
- 批量绘制减少状态切换
- 使用 transform 优化位置计算
- 避免频繁的内存分配

**React优化：**
- 使用 useMemo 缓存计算结果
- 使用 useCallback 缓存函数引用
- 合理拆分组件避免不必要的重渲染
- 使用 React.memo 优化列表渲染

**图像优化：**
- 使用 next/image 组件优化图像加载
- 图像懒加载
- 响应式图像尺寸

## 📊 数据统计与分析（可选扩展）

### 统计维度

**个人统计：**
- 总游戏次数
- 最高分记录
- 收集的单词总数
- 生成的诗歌总数
- 生成的图像总数
- 最喜欢的单词（点击次数统计）

**成就进度：**
- 已解锁成就列表
- 未解锁成就的进度

### 数据持久化

- 使用 localStorage 保存个人统计数据
- 保存最高分记录
- 保存收藏的诗歌和图像
- 可选：使用 Prisma + SQLite 实现更复杂的数据持久化

## 🎯 开发优先级

### Phase 1: 核心游戏功能（必须）
1. ✅ 基础贪吃蛇游戏逻辑
2. ✅ 单词食物系统
3. ✅ 单词收集盒UI
4. ✅ 进度追踪
5. ✅ 诗歌生成API
6. ✅ 图像生成API
7. ✅ 基础UI布局

### Phase 2: 用户体验提升（重要）
1. ⏳ 诗歌重新混合功能
2. ⏳ 加载状态动画
3. ⏳ 过渡动画
4. ⏳ 移动端适配
5. ⏳ 游戏暂停/继续
6. ⏳ 音效（可选）

### Phase 3: 增强体验（推荐）
1. ⏳ 成就系统
2. ⏳ 特殊事件
3. ⏳ 粒子特效
4. ⏳ 季节主题
5. ⏳ 统计数据
6. ⏳ 分享功能

### Phase 4: 高级功能（可选）
1. ⏳ 多人排行榜
2. ⏳ 社交分享
3. ⏳ 自定义主题
4. ⏳ 单词扩展包
5. ⏳ 背景音乐系统

## 📝 代码质量要求

### TypeScript规范
- 严格模式，禁止 any 类型
- 所有组件和函数必须有类型注解
- 使用 interface 定义数据结构
- 使用 enum 定义常量

### 代码组织
- 按功能模块划分文件
- 组件文件命名使用 PascalCase
- 工具函数文件命名使用 camelCase
- API路由放在 /app/api 目录下

### 注释规范
- 所有复杂逻辑必须添加注释
- 函数注释使用 JSDoc 格式
- 关键算法添加详细说明

### 错误处理
- 所有API调用必须有错误处理
- 用户友好的错误提示
- 加载状态明确显示

## 🎨 视觉设计示例

### 页面配色方案
```css
:root {
  /* 主色调 - 森林绿 */
  --primary: #166534;
  --primary-hover: #15803d;
  --primary-light: #22c55e;

  /* 辅助色 - 温暖橙 */
  --secondary: #f97316;
  --secondary-hover: #ea580c;
  --secondary-light: #fdba74;

  /* 强调色 - 优雅紫 */
  --accent: #8b5cf6;
  --accent-hover: #7c3aed;
  --accent-light: #a78bfa;

  /* 背景渐变 */
  --bg-gradient-start: #f0fdf4;
  --bg-gradient-end: #fef9c3;

  /* 诗歌卡片渐变 */
  --poem-gradient-start: #faf5ff;
  --poem-gradient-end: #fce7f3;

  /* 图像卡片渐变 */
  --image-gradient-start: #ecfeff;
  --image-gradient-end: #dbeafe;
}
```

### 阴影效果
```css
.card-shadow {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
              0 2px 4px -2px rgba(0, 0, 0, 0.1);
}

.elevated-shadow {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
              0 4px 6px -4px rgba(0, 0, 0, 0.1);
}

.glow-shadow {
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
}
```

## 🚀 性能基准

### 性能目标
- 首屏加载时间 < 2秒
- 游戏帧率稳定在 60fps
- API响应时间：
  - 诗歌生成 < 10秒
  - 图像生成 < 15秒
- 移动端首屏加载时间 < 3秒

### 优化措施
- 代码分割和懒加载
- 图像压缩和CDN
- 减少不必要的重渲染
- 使用 Web Worker 处理计算密集型任务

## 📚 参考资料

### 游戏开发
- Canvas API文档
- Game Loop最佳实践
- 性能优化技巧

### AI集成
- z-ai-web-dev-sdk文档
- Prompt工程最佳实践
- AI艺术生成指南

### UI/UX
- Tailwind CSS文档
- shadcn/ui组件库
- Framer Motion动画库
- Web动画最佳实践

---

## 🎯 最终目标

创建一个令人惊叹、充满创意、融合AI艺术的贪吃蛇游戏。玩家在游戏中体验收集单词的乐趣，见证AI将单词转化为优美诗歌，再将诗歌转化为视觉艺术的神奇过程。

这不仅是一个游戏，更是一次艺术创作的旅程。每一次游戏都是独特的，每一首诗歌都是原创的，每一幅图像都是独一无二的。

让我们一起创造这个诗意与科技融合的艺术品！🎨🎮✨
